#include <stdio.h>
#include <Windows.h>
#include <stdlib.h>

int main() {
	DWORD desiredAccess= PROCESS_ALL_ACCESS;
    DWORD pid;
    char input[256];
    printf("Enter the process ID: ");
    if (fgets(input, sizeof(input), stdin) != NULL) {
        char* endptr;
        pid = strtoul(input, &endptr, 10);

        if (endptr == input || *endptr != '\n') {
            fprintf(stderr, "Invalid input. Please enter a numeric process ID.\n");
            return 1;
        }
    }
    else {
        fprintf(stderr, "Error reading input.\n");
        return 1;
    }

	HANDLE p = OpenProcess(desiredAccess,FALSE,pid);
	if (p == NULL) {
		printf("Error opening process. Err code: %lu\n", GetLastError());
	}
	else {
		printf("Success opening process with handle %p\n", p);
	}

	CloseHandle(p);
	return 0;
}
